- diff_file = discussion.diff_file
- blob = discussion.blob

.diff-file.file-holder
  .js-file-title.file-title.file-title-flex-parent
    .file-header-content
      = render "projects/diffs/file_header", diff_file: diff_file, url: discussion_path(discussion), show_toggle: false

  .diff-content.code.js-syntax-highlight
    %table
      - discussions = { discussion.original_line_code => [discussion] }
      = render partial: "projects/diffs/line",
        collection: discussion.truncated_diff_lines,
        as: :line,
        locals: { diff_file: diff_file,
          discussions: discussions,
          discussion_expanded: true,
          plain: true }
